[gRPC](https://grpc.io/) 를 이용한 서비스 sample

## GETTING STARTED

### Build and run

아래 과정을 거쳐 project 를 설정하고 실행 가능. 이미 설치 되어있는 component 나 package 가 있다면
skip 가능.

 1. 개발환경

    * 64 bit Windows 10
    * Visual studio 2019 16.6.1
    * Windows SDK 10.0.18362.0
    * .NET core 3.1 SDK
    * git 2.22.0

 2. client(C++) [gRPC](https://grpc.io) 및 추가 library 사용을 위한 package 설치
 
    1) [vcpkg](https://docs.microsoft.com/ko-kr/cpp/build/vcpkg?view=vs-2019) 설치 ; `git clone https://github.com/microsoft/vcpkg.git` 실행 후 powershell 또는 cmd 에서 `bootstrap-vcpkg.bat` 실행

    2) [protobuf](https://developers.google.com/protocol-buffers) pakcage 설치 `.\vcpkg.exe install protobuf:x64-windows`

    3) grpc package 설치 `.\vcpkg.exe install grpc:x64-windows`

    4) winsock2 pakcage 설치 `.\vcpkg.exe install winsock2:x64-windows`

    5) 관리자 권한으로 pwoershell 혹은 cmd 에서 `.\vcpkg.exe integrate install` 실행해 visual studio 에서 사용가능하도록 등록

 3. visual studio 에서 `K2.sln` 파일 열기

 4. solution 속성 설정(properies)에서 `시작 프로젝트`에서 여러개의 시작프로젝트로 설정하고 포함되어있는 모든 프로젝트를 시작으로 설정.

 5. Run debug

### Design

#### ServerManagementService

[![](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gIHBhcnRpY2lwYW50IFNTIGFzIFNhbXBsZTxici8-IHNlcnZpY2UgIHBhcnRpY2lwYW50IFNCIGFzIFNlc3Npb248YnIvPiBiYWNrZW5kXG4gIHBhcnRpY2lwYW50IFNCIGFzIFNlcnZlcjxici8-IG1hbmFnZW1lbnQ8YnIvPiBiYWNrZW5kXG5cbiAgbm90ZSBvdmVyIFNCIDogbm8gYXJndW1lbnRcbiAgbm90ZSBvdmVyIFNTIDogc2VydmVyIG1hbmFnZW1lbnQ8YnIvPmJhY2tlbmQgc2VydmljZTxici8-YWRkcmVzcyBhcyBhbiBBcmd1bWVudFxuXG4gIG5vdGUgb3ZlciBTUyA6IG1pZGRsZXdhcmUgYmxvY2tzIGFueTxici8-IHJlcXVlc3QgdGlsbCByZWdpc3RlclxuXG4gIGxvb3AgdW50aWwgc3VjY2Vzc1xuICAgIFNTIC0tPj4gU0IgOiBSZWdpc3RlclxuICBlbmRcblxuICBub3RlIG92ZXIgU0IgOiBwb2xpY3kgYmFzZWQ8YnIvPnNlcnZlciByb2xlXG5cbiAgU0IgLT4-IFNTIDogQ29uZmlndXJhdGlvblxuICBub3RlIG92ZXIgU1MgOiBvdmVycmlkZSBsb2NhbCBjb25maWd1cmF0aW9uIFxuXG4gIGxvb3Agb24gc2VydmljZVxuICAgIFNTIC0tPj4gU0IgOiBQaW5nPGJyLz4gd2l0aCBzdGF0dXMgaW5mb1xuICBlbmRcblxuICBub3RlIG92ZXIgU0IgOiB1cGRhdGUgcnVubmluZzxici8-IHNlcnZlciBpbmZvcm1hdGlvblxuXG4gIG9wdCBzZXJ2aWNlIHN0b3BzXG4gICAgU1MgLS0-PiBTQiA6IFVucmVnaXN0ZXJcbiAgZW5kXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gIHBhcnRpY2lwYW50IFNTIGFzIFNhbXBsZTxici8-IHNlcnZpY2UgIHBhcnRpY2lwYW50IFNCIGFzIFNlc3Npb248YnIvPiBiYWNrZW5kXG4gIHBhcnRpY2lwYW50IFNCIGFzIFNlcnZlcjxici8-IG1hbmFnZW1lbnQ8YnIvPiBiYWNrZW5kXG5cbiAgbm90ZSBvdmVyIFNCIDogbm8gYXJndW1lbnRcbiAgbm90ZSBvdmVyIFNTIDogc2VydmVyIG1hbmFnZW1lbnQ8YnIvPmJhY2tlbmQgc2VydmljZTxici8-YWRkcmVzcyBhcyBhbiBBcmd1bWVudFxuXG4gIG5vdGUgb3ZlciBTUyA6IG1pZGRsZXdhcmUgYmxvY2tzIGFueTxici8-IHJlcXVlc3QgdGlsbCByZWdpc3RlclxuXG4gIGxvb3AgdW50aWwgc3VjY2Vzc1xuICAgIFNTIC0tPj4gU0IgOiBSZWdpc3RlclxuICBlbmRcblxuICBub3RlIG92ZXIgU0IgOiBwb2xpY3kgYmFzZWQ8YnIvPnNlcnZlciByb2xlXG5cbiAgU0IgLT4-IFNTIDogQ29uZmlndXJhdGlvblxuICBub3RlIG92ZXIgU1MgOiBvdmVycmlkZSBsb2NhbCBjb25maWd1cmF0aW9uIFxuXG4gIGxvb3Agb24gc2VydmljZVxuICAgIFNTIC0tPj4gU0IgOiBQaW5nPGJyLz4gd2l0aCBzdGF0dXMgaW5mb1xuICBlbmRcblxuICBub3RlIG92ZXIgU0IgOiB1cGRhdGUgcnVubmluZzxici8-IHNlcnZlciBpbmZvcm1hdGlvblxuXG4gIG9wdCBzZXJ2aWNlIHN0b3BzXG4gICAgU1MgLS0-PiBTQiA6IFVucmVnaXN0ZXJcbiAgZW5kXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)

#### InitService and PushBegin

[![](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gIHBhcnRpY2lwYW50IEMgYXMgQ2xpZW50XG4gIHBhcnRpY2lwYW50IElTIGFzIEluaXQgU2VydmljZVxuICBwYXJ0aWNpcGFudCBQUyBhcyBQdXNoIFNlcnZpY2VcblxuICByZWN0IHJnYigyNTUsIDAsIDAsIC4zKVxuICAgIG5vdGUgcmlnaHQgb2YgQzogbm8tYXV0aCBoZWFkZXJcbiAgICBDIC0tPj4gSVMgOiBTdGF0ZVxuICAgIElTIC0tPj4gQyA6IFNlcnZpY2UgdmVyc2lvbiAmPGJyLz5zZXJ2aWNlIGFkZHJlc3NcbiAgICBDIC0tPj4gSVMgOiBMb2dpblxuICAgIElTIC0tPj4gQyA6IEp3dCBhdXRoIGhlYWRlclxuICBlbmRcblxuICBub3RlIG92ZXIgQzogdXNpbmcgand0IGhlYWRlclxuXG4gIEMgLT4-IFBTIDogUHVzaEJlZ2luXG4gIGFjdGl2YXRlIFBTXG4gIFBTIC0-PiBDIDogUHVzaC1Db25maWcgand0IDogY29ubmVjdGVkKHB1c2gpIGJhY2tlbmQgYWRkcmVzc1xuXG4gIG5vdGUgb3ZlciBDIDogdXBkYXRlIGp3dCBoZWFkZXIgPGJyLz4gd2l0aCBzZXJ2ZXIgYWRkcmVzc1xuXG4gIG5vdGUgb3ZlciBQUyA6IGtlZXAgc3RyZWFtaW5nIGNvbm5lY3Rpb25cblxuICBkZWFjdGl2YXRlIFBTXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gIHBhcnRpY2lwYW50IEMgYXMgQ2xpZW50XG4gIHBhcnRpY2lwYW50IElTIGFzIEluaXQgU2VydmljZVxuICBwYXJ0aWNpcGFudCBQUyBhcyBQdXNoIFNlcnZpY2VcblxuICByZWN0IHJnYigyNTUsIDAsIDAsIC4zKVxuICAgIG5vdGUgcmlnaHQgb2YgQzogbm8tYXV0aCBoZWFkZXJcbiAgICBDIC0tPj4gSVMgOiBTdGF0ZVxuICAgIElTIC0tPj4gQyA6IFNlcnZpY2UgdmVyc2lvbiAmPGJyLz5zZXJ2aWNlIGFkZHJlc3NcbiAgICBDIC0tPj4gSVMgOiBMb2dpblxuICAgIElTIC0tPj4gQyA6IEp3dCBhdXRoIGhlYWRlclxuICBlbmRcblxuICBub3RlIG92ZXIgQzogdXNpbmcgand0IGhlYWRlclxuXG4gIEMgLT4-IFBTIDogUHVzaEJlZ2luXG4gIGFjdGl2YXRlIFBTXG4gIFBTIC0-PiBDIDogUHVzaC1Db25maWcgand0IDogY29ubmVjdGVkKHB1c2gpIGJhY2tlbmQgYWRkcmVzc1xuXG4gIG5vdGUgb3ZlciBDIDogdXBkYXRlIGp3dCBoZWFkZXIgPGJyLz4gd2l0aCBzZXJ2ZXIgYWRkcmVzc1xuXG4gIG5vdGUgb3ZlciBQUyA6IGtlZXAgc3RyZWFtaW5nIGNvbm5lY3Rpb25cblxuICBkZWFjdGl2YXRlIFBTXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)


#### SimpleSampleService

[![](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gIHBhcnRpY2lwYW50IEMgYXMgQ2xpZW50XG4gIHBhcnRpY2lwYW50IFBTIGFzIFB1c2ggc2VydmljZTxici8-XG4gIHBhcnRpY2lwYW50IFNTIGFzIFNpbXBsZSBTYW1wbGU8YnIvPiBTZXJ2aWNlXG4gICUlIHBhcnRpY2lwYW50IFVCIGFzIFVzZXIgU2Vzc2lvbjxici8-IEJhY2tlbmRcblxuICBDIC0-IFBTIDogVENQIGNvbm5lY3RlZFxuXG4gIEMgLS0-PiBTUyA6IFNhbXBsZUNvbW1hbmRcbiAgU1MgLS0-PiBQUyA6IElzT25saW5lXG4gIFBTIC0tPj4gU1MgOiBJc09ubGluZSByZXN1bHRcbiAgU1MgLS0-PiBDIDogQ29tbWFuZCByZXN1bHRcblxuICAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gIHBhcnRpY2lwYW50IEMgYXMgQ2xpZW50XG4gIHBhcnRpY2lwYW50IFBTIGFzIFB1c2ggc2VydmljZTxici8-XG4gIHBhcnRpY2lwYW50IFNTIGFzIFNpbXBsZSBTYW1wbGU8YnIvPiBTZXJ2aWNlXG4gICUlIHBhcnRpY2lwYW50IFVCIGFzIFVzZXIgU2Vzc2lvbjxici8-IEJhY2tlbmRcblxuICBDIC0-IFBTIDogVENQIGNvbm5lY3RlZFxuXG4gIEMgLS0-PiBTUyA6IFNhbXBsZUNvbW1hbmRcbiAgU1MgLS0-PiBQUyA6IElzT25saW5lXG4gIFBTIC0tPj4gU1MgOiBJc09ubGluZSByZXN1bHRcbiAgU1MgLS0-PiBDIDogQ29tbWFuZCByZXN1bHRcblxuICAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)

#### PushSampleService

[![](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gIHBhcnRpY2lwYW50IEMgYXMgQ2xpZW50XG4gIHBhcnRpY2lwYW50IFBTIGFzIFB1c2g8YnIvPiBzZXJ2aWNlXG4gIHBhcnRpY2lwYW50IFNTIGFzIFNhbXBsZSBwdXNoPGJyLz4gc2VydmljZVxuICBwYXJ0aWNpcGFudCBTQiBhcyBTZXNzaW9uPGJyLz4gYmFja2VuZFxuICBwYXJ0aWNpcGFudCBNQiBhcyBTZXJ2ZXI8YnIvPiBtYW5hZ2VtZW50PGJyLz4gYmFja2VuZFxuXG4gIEMgLT4gUFMgOiBUQ1AgY29ubmVjdGVkXG4gIGFjdGl2YXRlIFBTXG5cbiAgQyAtLT4-IFNTIDogQnJvYWRjYXN0XG4gIGFjdGl2YXRlIFNTXG4gICAgU1MgLS0-PiBNQiA6IEJyb2FkY2FzdFxuICAgIGFjdGl2YXRlIE1CXG4gICAgICBsb29wIGFsbCBzZXJ2ZXJzXG4gICAgICAgIE1CIC0tPj4gUFMgOiBCcm9hZGNhc3RGXG4gICAgICBlbmRcbiAgICAgIE1CIC0tPj4gU1MgOiByZXN1bHRcbiAgICBkZWFjdGl2YXRlIE1CXG4gIGRlYWN0aXZhdGUgU1NcblxuICBsb29wIGFsbCB1c2Vyc1xuICAgIFBTIC0-PiBDIDogUHVzaC1NZXNzYWdlKGJyb2FkY2FzdClcbiAgZW5kXG5cbiAgQyAtLT4-IFNTIDogTWVzc2FnZVxuICBhY3RpdmF0ZSBTU1xuICAgIFNTIC0tPj4gU0IgOiBQdXNoXG4gICAgYWN0aXZhdGUgU0JcbiAgICAgIG5vdGUgb3ZlciBTQiA6IGZpbmQgdGhlIHB1c2ggc2VydmVyXG4gICAgICBTQiAtLT4-IFBTIDogUHVzaEZcbiAgICAgIFNCIC0tPj4gU1MgOiByZXN1bHRcbiAgICBkZWFjdGl2YXRlIFNCXG4gIGRlYWN0aXZhdGUgU1NcblxuICBub3RlIG92ZXIgUFM6IGZpbmQgdGhlIHVzZXJcbiAgUFMgLT4-IEMgICAgOiBQdXNoLU1lc3NhZ2VcblxuICAgIEMgLS0-PiBTUyAgIDogSGVsbG9cbiAgICBub3RlIG92ZXIgU1M6IHVzZSBqd3QgYXMgcHVzaCBiYWNrZW5kXG4gICAgU1MgLS0-PiBQUyAgOiBQdXNoRlxuICAgIFBTIC0-PiBDICAgIDogUHVzaC1NZXNzYWdlXG5cblxuICAgIEMgLS0-PiBTUyA6IEtpY2tcbiAgICBhY3RpdmF0ZSBTU1xuICAgICAgU1MgLS0-PiBTQiA6IEtpY2tVc2VyXG4gICAgICBhY3RpdmF0ZSBTQlxuICAgICAgICBub3RlIG92ZXIgU0IgOiBmaW5kIHRoZSBwdXNoIHNlcnZlclxuICAgICAgICBTQiAtLT4-IFBTIDogS2lja1VzZXJGXG4gICAgICAgIFNCIC0tPj4gU1MgOiByZXN1bHRcbiAgICAgIGRlYWN0aXZhdGUgU0JcbiAgICBkZWFjdGl2YXRlIFNTXG5cbiAgICBub3RlIG92ZXIgUFM6IGZpbmQgdGhlIHVzZXJcbiAgICBQUyAteCBDICAgIDogRGlzY29ubmVjdFxuXG4gIGRlYWN0aXZhdGUgUFMiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gIHBhcnRpY2lwYW50IEMgYXMgQ2xpZW50XG4gIHBhcnRpY2lwYW50IFBTIGFzIFB1c2g8YnIvPiBzZXJ2aWNlXG4gIHBhcnRpY2lwYW50IFNTIGFzIFNhbXBsZSBwdXNoPGJyLz4gc2VydmljZVxuICBwYXJ0aWNpcGFudCBTQiBhcyBTZXNzaW9uPGJyLz4gYmFja2VuZFxuICBwYXJ0aWNpcGFudCBNQiBhcyBTZXJ2ZXI8YnIvPiBtYW5hZ2VtZW50PGJyLz4gYmFja2VuZFxuXG4gIEMgLT4gUFMgOiBUQ1AgY29ubmVjdGVkXG4gIGFjdGl2YXRlIFBTXG5cbiAgQyAtLT4-IFNTIDogQnJvYWRjYXN0XG4gIGFjdGl2YXRlIFNTXG4gICAgU1MgLS0-PiBNQiA6IEJyb2FkY2FzdFxuICAgIGFjdGl2YXRlIE1CXG4gICAgICBsb29wIGFsbCBzZXJ2ZXJzXG4gICAgICAgIE1CIC0tPj4gUFMgOiBCcm9hZGNhc3RGXG4gICAgICBlbmRcbiAgICAgIE1CIC0tPj4gU1MgOiByZXN1bHRcbiAgICBkZWFjdGl2YXRlIE1CXG4gIGRlYWN0aXZhdGUgU1NcblxuICBsb29wIGFsbCB1c2Vyc1xuICAgIFBTIC0-PiBDIDogUHVzaC1NZXNzYWdlKGJyb2FkY2FzdClcbiAgZW5kXG5cbiAgQyAtLT4-IFNTIDogTWVzc2FnZVxuICBhY3RpdmF0ZSBTU1xuICAgIFNTIC0tPj4gU0IgOiBQdXNoXG4gICAgYWN0aXZhdGUgU0JcbiAgICAgIG5vdGUgb3ZlciBTQiA6IGZpbmQgdGhlIHB1c2ggc2VydmVyXG4gICAgICBTQiAtLT4-IFBTIDogUHVzaEZcbiAgICAgIFNCIC0tPj4gU1MgOiByZXN1bHRcbiAgICBkZWFjdGl2YXRlIFNCXG4gIGRlYWN0aXZhdGUgU1NcblxuICBub3RlIG92ZXIgUFM6IGZpbmQgdGhlIHVzZXJcbiAgUFMgLT4-IEMgICAgOiBQdXNoLU1lc3NhZ2VcblxuICAgIEMgLS0-PiBTUyAgIDogSGVsbG9cbiAgICBub3RlIG92ZXIgU1M6IHVzZSBqd3QgYXMgcHVzaCBiYWNrZW5kXG4gICAgU1MgLS0-PiBQUyAgOiBQdXNoRlxuICAgIFBTIC0-PiBDICAgIDogUHVzaC1NZXNzYWdlXG5cblxuICAgIEMgLS0-PiBTUyA6IEtpY2tcbiAgICBhY3RpdmF0ZSBTU1xuICAgICAgU1MgLS0-PiBTQiA6IEtpY2tVc2VyXG4gICAgICBhY3RpdmF0ZSBTQlxuICAgICAgICBub3RlIG92ZXIgU0IgOiBmaW5kIHRoZSBwdXNoIHNlcnZlclxuICAgICAgICBTQiAtLT4-IFBTIDogS2lja1VzZXJGXG4gICAgICAgIFNCIC0tPj4gU1MgOiByZXN1bHRcbiAgICAgIGRlYWN0aXZhdGUgU0JcbiAgICBkZWFjdGl2YXRlIFNTXG5cbiAgICBub3RlIG92ZXIgUFM6IGZpbmQgdGhlIHVzZXJcbiAgICBQUyAteCBDICAgIDogRGlzY29ubmVjdFxuXG4gIGRlYWN0aXZhdGUgUFMiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)

### Test

  - client 실행창에서 최초에 id 와 password 를 묻게 되는데, [password 의 경우 k 로 시작하면 항상 성공하고 그렇지 않으면 실패하도록](https://github.com/alkee-allm/k2proto/blob/0aeb1da3996fe5abccce6a82b81549c80a425b9c/K2svc/Frontend/InitService.cs#L21-L30) 되어있음.
  
